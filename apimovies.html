<!DOCTYPE html>
<html>

<head>
      <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

        <link href="https://fonts.cdnfonts.com/css/fruinky" rel="stylesheet">
        <link href="https://fonts.cdnfonts.com/css/levitation" rel="stylesheet">
                      
            <link rel="stylesheet" href="style.css">
  <title></title>
</head>

<body>
   <div style="margin: 24px;">
        <nav class="navbar navbar-light" style="background-color: #230C33;">
            <div class="container">
                
                <ul class="nav navbar-nav">
                    <li>
                        <a href="index.html" style="color: #9984D4;"><titulo1 style="font-size: 15px;">inicio</titulo1></a>
                    </li>
                    <li>
                        <a href="menu.html" style="color: #9984D4;"><titulo1 style="font-size: 15px;">menu</titulo1></a>
                    </li>
                    <li>
                        <a href="pedido.html" style="color: #9984D4;"><titulo1 style="font-size: 15px;">pedido</titulo1></a>
                    </li>
                    <li>
                        <a href="contacto.html" style="color: #9984D4;"><titulo1 style="font-size: 15px;">contacto</titulo1></a>
                    </li>
                    <li>
                        <a href="calculadorafisica.html" style="color: #9984D4;"><titulo1 style="font-size: 15px;">calculadora fisica</titulo1></a>
                    </li>
                    <li class="active">
                    <a href="apimovies.html" style="color: #9984D4;"><titulo1 style="font-size: 15px;">movies</titulo1>
                    </a>
                  </li>
                   <li>
                    <a href="movies1.html" style="color: #9984D4;"><titulo1 style="font-size: 15px;">movies 2</titulo1>
                    </a>
                  </li>
                </ul>
            </div>
         </nav>
    </div>
    <div class="cointaner">
      <h1>Peliculas</h1>
      <form id="form">
        <input type="text" id="search" placeholder="buscame la película...">
        <input type="submit" value="search">
      </form>
      <section id="name" class="movies">
      </section>
      </div>
      <script>
//En esta línea se define la URL de la API para obtener la lista de películas.
const API_URL = 'https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=3fd2be6f0c70a2a598f084ddfb75487c&page=1&#39';
//Esta línea define la URL de la API para obtener las imágenes de las películas.
const IMG_PATH = 'https://image.tmdb.org/t/p/w1280&#39';
//En esta línea se define la URL de la API para buscar películas.
const SEARCH_API = 'https://api.themoviedb.org/3/search/movie?api_key=3fd2be6f0c70a2a598f084ddfb75487c&query="&#39';
const main=document.getElementById('main')
const form=document.getElementById('form')
const search=document.getElementById('search')
//esta linea llama a la funcion getMovies para obtener la lista de películas de iniciales
getMovies(API_URL);
//Esta función utiliza fetch para buscar la información de la API y luego utiliza await para esperar que la información sea procesada, finalmente, llama ala funcion showMovies para mostrar la lista de películas en el Dow.
async function getMovies(url) {
  const res = await fetch(url);
  const data = await res.json();
  showMovies(data.result);
}
function showMovies(Movies){
  main.innerHTML='';
  movies.forEach((movie)=>{
    const {title, poster_path,vote_average, overview, realese_date}=movie;
    const movieEl=document.createElement('div');
    
    movieEl.classList.add('movie');
    movieEl.innerHTML=`
    <img src="${IMG_PATH+poster_path}" alt="${title}"
    <div class="movie-info">
      <h3>${title}
      <span class="${getClassByRate(vote_average)}">${vote_average}</span></div>
      <div class="overview">
        <h3>Overview</h3>
        ${Overview}
        <h3>Release Date</h3>
        ${realese_date}</div>`;
        main.appendChild(movieEl);
  });
};
function getClassByRate(vote){
  if(vote>=8){
    return 'green';
}else if(vote>=5){
  return 'orange';
}else{
    return 'red';
  }
}
form.addEventListener('submit',(e)=>{
  e.preventDefault()
  const searchTerm=search.value;
  if(searchTerm && searchTerm !==''){
    getMovies(SEARCH_API+searchTerm)
    search.value='';
  }else{
    window.location.reload();
  }
})

 </script>

<div id="footer"></div>
<script>
  $(function(){
    $("#footer").load("/footer.html");
  });
</script>
</body>

</html>